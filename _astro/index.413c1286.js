import{R as yt,r as p}from"./index.0b2a3d34.js";import{s as Kt}from"./index.1c0a9886.js";const y=new WeakMap,lt={},nt={},U=()=>{},V=U(),ft=Object,a=t=>t===V,F=t=>typeof t=="function",q=(t,e)=>({...t,...e}),wt="undefined",ot=typeof window!=wt,ht=typeof document!=wt,jt=()=>ot&&typeof window.requestAnimationFrame!=wt,Ft=(t,e)=>{const n=y.get(t);return[()=>!a(e)&&t.get(e)||lt,r=>{if(!a(e)){const o=t.get(e);e in nt||(nt[e]=o),n[5](e,q(o,r),o||lt)}},n[6],()=>!a(e)&&e in nt?nt[e]:!a(e)&&t.get(e)||lt]},st=new WeakMap;let Gt=0;const X=t=>{const e=typeof t,n=t&&t.constructor,r=n==Date;let o,i;if(ft(t)===t&&!r&&n!=RegExp){if(o=st.get(t),o)return o;if(o=++Gt+"~",st.set(t,o),n==Array){for(o="@",i=0;i<t.length;i++)o+=X(t[i])+",";st.set(t,o)}if(n==ft){o="#";const c=ft.keys(t).sort();for(;!a(i=c.pop());)a(t[i])||(o+=i+":"+X(t[i])+",");st.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o};let _t=!0;const Yt=()=>_t,[Tt,mt]=ot&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[U,U],$t=()=>{const t=ht&&document.visibilityState;return a(t)||t!=="hidden"},Qt=t=>(ht&&document.addEventListener("visibilitychange",t),Tt("focus",t),()=>{ht&&document.removeEventListener("visibilitychange",t),mt("focus",t)}),Xt=t=>{const e=()=>{_t=!0,t()},n=()=>{_t=!1};return Tt("online",e),Tt("offline",n),()=>{mt("online",e),mt("offline",n)}},Zt={isOnline:Yt,isVisible:$t},te={initFocus:Qt,initReconnect:Xt},It=!yt.useId,Z=!ot||"Deno"in window,ee=t=>jt()?window.requestAnimationFrame(t):setTimeout(t,1),dt=Z?p.useEffect:p.useLayoutEffect,Et=typeof navigator<"u"&&navigator.connection,Nt=!Z&&Et&&(["slow-2g","2g"].includes(Et.effectiveType)||Et.saveData),St=t=>{if(F(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?X(t):"",[t,e]};let ne=0;const pt=()=>++ne,xt=0,Mt=1,Wt=2,se=3;var Q={__proto__:null,FOCUS_EVENT:xt,RECONNECT_EVENT:Mt,MUTATE_EVENT:Wt,ERROR_REVALIDATE_EVENT:se};async function Ut(...t){const[e,n,r,o]=t,i=q({populateCache:!0,throwOnError:!0},typeof o=="boolean"?{revalidate:o}:o||{});let c=i.populateCache;const d=i.rollbackOnError;let f=i.optimisticData;const v=i.revalidate!==!1,T=g=>typeof d=="function"?d(g):d!==!1,m=i.throwOnError;if(F(n)){const g=n,S=[],C=e.keys();for(let s=C.next();!s.done;s=C.next()){const x=s.value;!/^\$(inf|sub)\$/.test(x)&&g(e.get(x)._k)&&S.push(x)}return Promise.all(S.map(b))}return b(n);async function b(g){const[S]=St(g);if(!S)return;const[C,s]=Ft(e,S),[x,P,H]=y.get(e),M=x[S],k=()=>v&&(delete H[S],M&&M[0])?M[0](Wt).then(()=>C().data):C().data;if(t.length<3)return k();let h=r,u;const z=pt();P[S]=[z,0];const I=!a(f),B=C(),rt=B.data,tt=B._c,A=a(tt)?rt:tt;if(I&&(f=F(f)?f(A):f,s({data:f,_c:A})),F(h))try{h=h(A)}catch(J){u=J}if(h&&F(h.then))if(h=await h.catch(J=>{u=J}),z!==P[S][0]){if(u)throw u;return h}else u&&I&&T(u)&&(c=!0,h=A,s({data:h,_c:V}));c&&(u||(F(c)&&(h=c(h,A)),s({data:h,_c:V}))),P[S][1]=pt();const it=await k();if(s({_c:V}),u){if(m)throw u;return}return c?it:h}}const Lt=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},oe=(t,e)=>{if(!y.has(t)){const n=q(te,e),r={},o=Ut.bind(V,t);let i=U;const c={},d=(T,m)=>{const b=c[T]||[];return c[T]=b,b.push(m),()=>b.splice(b.indexOf(m),1)},f=(T,m,b)=>{t.set(T,m);const g=c[T];if(g)for(const S of g)S(m,b)},v=()=>{if(!y.has(t)&&(y.set(t,[r,{},{},{},o,f,d]),!Z)){const T=n.initFocus(setTimeout.bind(V,Lt.bind(V,r,xt))),m=n.initReconnect(setTimeout.bind(V,Lt.bind(V,r,Mt)));i=()=>{T&&T(),m&&m(),y.delete(t)}}};return v(),[t,o,v,i]}return[t,y.get(t)[4]]},re=(t,e,n,r,o)=>{const i=n.errorRetryCount,c=o.retryCount,d=~~((Math.random()+.5)*(1<<(c<8?c:8)))*n.errorRetryInterval;!a(i)&&c>i||setTimeout(r,d,o)},ie=(t,e)=>X(t)==X(e),[qt,ae]=oe(new Map),ce=q({onLoadingSlow:U,onSuccess:U,onError:U,onErrorRetry:re,onDiscarded:U,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Nt?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Nt?5e3:3e3,compare:ie,isPaused:()=>!1,cache:qt,mutate:ae,fallback:{}},Zt),ue=(t,e)=>{const n=q(t,e);if(e){const{use:r,fallback:o}=t,{use:i,fallback:c}=e;r&&i&&(n.use=r.concat(i)),o&&c&&(n.fallback=q(o,c))}return n},le=p.createContext({}),Pt=ot&&window.__SWR_DEVTOOLS_USE__,fe=Pt?window.__SWR_DEVTOOLS_USE__:[],de=()=>{Pt&&(window.__SWR_DEVTOOLS_REACT__=yt)},Ee=t=>F(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],Re=()=>q(ce,p.useContext(le)),he=t=>(e,n,r)=>t(e,n&&((...i)=>{const c=St(e)[0],[,,,d]=y.get(qt),f=d[c];return f?(delete d[c],f):n(...i)}),r),_e=fe.concat(he),Te=t=>function(...n){const r=Re(),[o,i,c]=Ee(n),d=ue(r,c);let f=t;const{use:v}=d,T=(v||[]).concat(_e);for(let m=T.length;m--;)f=T[m](f);return f(o,i||d.fetcher||null,d)},me=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o>=0&&(r[o]=r[r.length-1],r.pop())}};de();const Rt={dedupe:!0},pe=(t,e,n)=>{const{cache:r,compare:o,suspense:i,fallbackData:c,revalidateOnMount:d,revalidateIfStale:f,refreshInterval:v,refreshWhenHidden:T,refreshWhenOffline:m,keepPreviousData:b}=n,[g,S,C]=y.get(r),[s,x]=St(t),P=p.useRef(!1),H=p.useRef(!1),M=p.useRef(s),k=p.useRef(e),h=p.useRef(n),u=()=>h.current,z=()=>u().isVisible()&&u().isOnline(),[I,B,rt,tt]=Ft(r,s),A=p.useRef({}).current,it=a(c)?n.fallback[s]:c,J=(l,E)=>{let R=!0;for(const w in A){const _=w;_==="data"?o(E[_],l[_])||a(l[_])&&o(E[_],at)||(R=!1):E[_]!==l[_]&&(R=!1)}return R},Ct=p.useMemo(()=>{const l=(()=>!s||!e?!1:a(d)?u().isPaused()||i?!1:a(f)?!0:f:d)(),E=N=>{const W=q(N);return delete W._k,l?{isValidating:!0,isLoading:!0,...W}:W},R=I(),w=tt(),_=E(R),Y=R===w?_:E(w);let O=_;return[()=>{const N=E(I());return J(N,O)?O:O=N},()=>Y]},[r,s]),K=Kt.useSyncExternalStore(p.useCallback(l=>rt(s,(E,R)=>{J(R,E)||l()}),[r,s]),Ct[0],Ct[1]),gt=!P.current,Ht=g[s]&&g[s].length>0,j=K.data,G=a(j)?it:j,et=K.error,Ot=p.useRef(G),at=b?a(j)?Ot.current:j:G,Dt=(()=>Ht&&!a(et)?!1:gt&&!a(d)?d:u().isPaused()?!1:i?a(G)?!1:f:a(G)||f)(),vt=!!(s&&e&&gt&&Dt),kt=a(K.isValidating)?vt:K.isValidating,zt=a(K.isLoading)?vt:K.isLoading,$=p.useCallback(async l=>{const E=k.current;if(!s||!E||H.current||u().isPaused())return!1;let R,w,_=!0;const Y=l||{},O=!C[s]||!Y.dedupe,N=()=>It?!H.current&&s===M.current&&P.current:s===M.current,W={isValidating:!1,isLoading:!1},bt=()=>{B(W)},At=()=>{const D=C[s];D&&D[1]===w&&delete C[s]},Vt={isValidating:!0};a(I().data)&&(Vt.isLoading=!0);try{if(O&&(B(Vt),n.loadingTimeout&&a(I().data)&&setTimeout(()=>{_&&N()&&u().onLoadingSlow(s,n)},n.loadingTimeout),C[s]=[E(x),pt()]),[R,w]=C[s],R=await R,O&&setTimeout(At,n.dedupingInterval),!C[s]||C[s][1]!==w)return O&&N()&&u().onDiscarded(s),!1;W.error=V;const D=S[s];if(!a(D)&&(w<=D[0]||w<=D[1]||D[1]===0))return bt(),O&&N()&&u().onDiscarded(s),!1;const L=I().data;W.data=o(L,R)?L:R,O&&N()&&u().onSuccess(R,s,n)}catch(D){At();const L=u(),{shouldRetryOnError:ct}=L;L.isPaused()||(W.error=D,O&&N()&&(L.onError(D,s,L),(ct===!0||F(ct)&&ct(D))&&z()&&L.onErrorRetry(D,s,L,Jt=>{const ut=g[s];ut&&ut[0]&&ut[0](Q.ERROR_REVALIDATE_EVENT,Jt)},{retryCount:(Y.retryCount||0)+1,dedupe:!0})))}return _=!1,bt(),!0},[s,r]),Bt=p.useCallback((...l)=>Ut(r,M.current,...l),[]);if(dt(()=>{k.current=e,h.current=n,a(j)||(Ot.current=j)}),dt(()=>{if(!s)return;const l=$.bind(V,Rt);let E=0;const w=me(s,g,(_,Y={})=>{if(_==Q.FOCUS_EVENT){const O=Date.now();u().revalidateOnFocus&&O>E&&z()&&(E=O+u().focusThrottleInterval,l())}else if(_==Q.RECONNECT_EVENT)u().revalidateOnReconnect&&z()&&l();else{if(_==Q.MUTATE_EVENT)return $();if(_==Q.ERROR_REVALIDATE_EVENT)return $(Y)}});return H.current=!1,M.current=s,P.current=!0,B({_k:x}),Dt&&(a(G)||Z?l():ee(l)),()=>{H.current=!0,w()}},[s]),dt(()=>{let l;function E(){const w=F(v)?v(I().data):v;w&&l!==-1&&(l=setTimeout(R,w))}function R(){!I().error&&(T||u().isVisible())&&(m||u().isOnline())?$(Rt).then(E):E()}return E(),()=>{l&&(clearTimeout(l),l=-1)}},[v,T,m,s]),p.useDebugValue(at),i&&a(G)&&s)throw!It&&Z?new Error("Fallback data is required when using suspense in SSR."):(k.current=e,h.current=n,H.current=!1,a(et)?$(Rt):et);return{mutate:Bt,get data(){return A.data=!0,at},get error(){return A.error=!0,et},get isValidating(){return A.isValidating=!0,kt},get isLoading(){return A.isLoading=!0,zt}}};var Ce=Te(pe);export{Ce as u};
