import{j as l}from"./jsx-runtime.fd9a4f39.js";import{L as $,d as F,m as v}from"./features-animation.13997583.js";import{r as e}from"./index.e76fa941.js";import{u as j,f as O,a as A,P as B,L as N}from"./create-visual-element.aa3074cd.js";function M(){const n=e.useRef(!1);return j(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function U(){const n=M(),[s,t]=e.useState(0),r=e.useCallback(()=>{n.current&&t(s+1)},[s]);return[e.useCallback(()=>O.postRender(r),[r]),s]}class K extends e.Component{getSnapshotBeforeUpdate(s){const t=this.props.childRef.current;if(t&&s.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function S({children:n,isPresent:s}){const t=e.useId(),r=e.useRef(null),f=e.useRef({width:0,height:0,top:0,left:0});return e.useInsertionEffect(()=>{const{width:d,height:u,top:c,left:x}=f.current;if(s||!r.current||!d||!u)return;r.current.dataset.motionPopId=t;const p=document.createElement("style");return document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${u}px !important;
            top: ${c}px !important;
            left: ${x}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[s]),e.createElement(K,{isPresent:s,childRef:r,sizeRef:f},e.cloneElement(n,{ref:r}))}const w=({children:n,initial:s,isPresent:t,onExitComplete:r,custom:f,presenceAffectsLayout:d,mode:u})=>{const c=A(G),x=e.useId(),p=e.useMemo(()=>({id:x,initial:s,isPresent:t,custom:f,onExitComplete:a=>{c.set(a,!0);for(const i of c.values())if(!i)return;r&&r()},register:a=>(c.set(a,!1),()=>c.delete(a))}),d?void 0:[t]);return e.useMemo(()=>{c.forEach((a,i)=>c.set(i,!1))},[t]),e.useEffect(()=>{!t&&!c.size&&r&&r()},[t]),u==="popLayout"&&(n=e.createElement(S,{isPresent:t},n)),e.createElement(B.Provider,{value:p},n)};function G(){return new Map}function T(n){return e.useEffect(()=>()=>n(),[])}const y=n=>n.key||"";function q(n,s){n.forEach(t=>{const r=y(t);s.set(r,t)})}function D(n){const s=[];return e.Children.forEach(n,t=>{e.isValidElement(t)&&s.push(t)}),s}const H=({children:n,custom:s,initial:t=!0,onExitComplete:r,exitBeforeEnter:f,presenceAffectsLayout:d=!0,mode:u="sync"})=>{let[c]=U();const x=e.useContext(N).forceRender;x&&(c=x);const p=M(),a=D(n);let i=a;const m=new Set,C=e.useRef(i),E=e.useRef(new Map).current,R=e.useRef(!0);if(j(()=>{R.current=!1,q(a,E),C.current=i}),T(()=>{R.current=!0,E.clear(),m.clear()}),R.current)return e.createElement(e.Fragment,null,i.map(o=>e.createElement(w,{key:y(o),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:d,mode:u},o)));i=[...i];const g=C.current.map(y),L=a.map(y),b=g.length;for(let o=0;o<b;o++){const h=g[o];L.indexOf(h)===-1&&m.add(h)}return u==="wait"&&m.size&&(i=[]),m.forEach(o=>{if(L.indexOf(o)!==-1)return;const h=E.get(o);if(!h)return;const z=g.indexOf(o),k=()=>{E.delete(o),m.delete(o);const I=C.current.findIndex(P=>P.key===o);if(C.current.splice(I,1),!m.size){if(C.current=a,p.current===!1)return;c(),r&&r()}};i.splice(z,0,e.createElement(w,{key:y(h),isPresent:!1,onExitComplete:k,custom:s,presenceAffectsLayout:d,mode:u},h))}),i=i.map(o=>{const h=o.key;return m.has(h)?o:e.createElement(w,{key:y(o),isPresent:!0,presenceAffectsLayout:d,mode:u},o)}),e.createElement(e.Fragment,null,m.size?i:i.map(o=>e.cloneElement(o)))},V=({onClick:n,className:s})=>l.jsx("button",{title:"close",type:"button",className:`flex items-center justify-center aspect-square w-10 rounded-full z-[10] bg-[#eee] ${s||"absolute left-5 top-5 "}`,onClick:n,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:l.jsx("path",{d:"M0.331288 12.0052C-0.101821 12.4381 -0.122445 13.2113 0.3416 13.6546C0.785021 14.1186 1.56874 14.0979 2.00185 13.6649L7.00323 8.66495L12.0046 13.6649C12.448 14.1082 13.2111 14.1186 13.6545 13.6546C14.1186 13.2113 14.1083 12.4381 13.6649 11.9948L8.66348 6.99485L13.6649 2.00515C14.1083 1.55155 14.1186 0.78866 13.6545 0.345361C13.2111 -0.118557 12.448 -0.108247 12.0046 0.335052L7.00323 5.33505L2.00185 0.335052C1.56874 -0.0979382 0.785021 -0.118557 0.3416 0.345361C-0.122445 0.78866 -0.101821 1.56186 0.331288 1.99485L5.33267 6.99485L0.331288 12.0052Z",fill:"#869AB8",fillOpacity:"0.7"})})}),J=({state:n,children:s,handleClose:t,center:r,className:f})=>l.jsx($,{features:F,children:l.jsx(H,{children:n?l.jsx(v.section,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{delay:.4}},className:`fixed   inset-0  bg-[#00000050] backdrop-blur-sm z-50 flex overflow-y-scroll  ${r?"items-center px-3 py-10":"items-end md:items-center"}`,children:l.jsx("div",{className:" w-full  max-h-screen  ",children:l.jsxs(v.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},exit:{opacity:0,y:40},transition:{delay:.2,duration:.5},className:` relative h-fit ${f} ${r?"rounded-[20px]":"rounded-t-[24px] md:rounded-[20px]"}  w-full mx-auto max-w-[786px]  max-h-fit   `,children:[l.jsx(V,{onClick:t}),s]})})}):null})});export{J as O};
