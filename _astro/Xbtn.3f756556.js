import{r as e}from"./index.0b2a3d34.js";import{a2 as M,f as j,a3 as F,P as $,L as A}from"./create-visual-element.9fd27a37.js";import{j as y}from"./jsx-runtime.32b752e4.js";function z(){const n=e.useRef(!1);return M(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function B(){const n=z(),[s,t]=e.useState(0),r=e.useCallback(()=>{n.current&&t(s+1)},[s]);return[e.useCallback(()=>j.postRender(r),[r]),s]}class O extends e.Component{getSnapshotBeforeUpdate(s){const t=this.props.childRef.current;if(t&&s.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function U({children:n,isPresent:s}){const t=e.useId(),r=e.useRef(null),m=e.useRef({width:0,height:0,top:0,left:0});return e.useInsertionEffect(()=>{const{width:a,height:f,top:u,left:h}=m.current;if(s||!r.current||!a||!f)return;r.current.dataset.motionPopId=t;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${f}px !important;
            top: ${u}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(l)}},[s]),e.createElement(O,{isPresent:s,childRef:r,sizeRef:m},e.cloneElement(n,{ref:r}))}const w=({children:n,initial:s,isPresent:t,onExitComplete:r,custom:m,presenceAffectsLayout:a,mode:f})=>{const u=F(K),h=e.useId(),l=e.useMemo(()=>({id:h,initial:s,isPresent:t,custom:m,onExitComplete:i=>{u.set(i,!0);for(const c of u.values())if(!c)return;r&&r()},register:i=>(u.set(i,!1),()=>u.delete(i))}),a?void 0:[t]);return e.useMemo(()=>{u.forEach((i,c)=>u.set(c,!1))},[t]),e.useEffect(()=>{!t&&!u.size&&r&&r()},[t]),f==="popLayout"&&(n=e.createElement(U,{isPresent:t},n)),e.createElement($.Provider,{value:l},n)};function K(){return new Map}function S(n){return e.useEffect(()=>()=>n(),[])}const C=n=>n.key||"";function G(n,s){n.forEach(t=>{const r=C(t);s.set(r,t)})}function T(n){const s=[];return e.Children.forEach(n,t=>{e.isValidElement(t)&&s.push(t)}),s}const H=({children:n,custom:s,initial:t=!0,onExitComplete:r,exitBeforeEnter:m,presenceAffectsLayout:a=!0,mode:f="sync"})=>{let[u]=B();const h=e.useContext(A).forceRender;h&&(u=h);const l=z(),i=T(n);let c=i;const d=new Set,x=e.useRef(c),E=e.useRef(new Map).current,R=e.useRef(!0);if(M(()=>{R.current=!1,G(i,E),x.current=c}),S(()=>{R.current=!0,E.clear(),d.clear()}),R.current)return e.createElement(e.Fragment,null,c.map(o=>e.createElement(w,{key:C(o),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:a,mode:f},o)));c=[...c];const g=x.current.map(C),L=i.map(C),I=g.length;for(let o=0;o<I;o++){const p=g[o];L.indexOf(p)===-1&&d.add(p)}return f==="wait"&&d.size&&(c=[]),d.forEach(o=>{if(L.indexOf(o)!==-1)return;const p=E.get(o);if(!p)return;const P=g.indexOf(o),b=()=>{E.delete(o),d.delete(o);const v=x.current.findIndex(k=>k.key===o);if(x.current.splice(v,1),!d.size){if(x.current=i,l.current===!1)return;u(),r&&r()}};c.splice(P,0,e.createElement(w,{key:C(p),isPresent:!1,onExitComplete:b,custom:s,presenceAffectsLayout:a,mode:f},p))}),c=c.map(o=>{const p=o.key;return d.has(p)?o:e.createElement(w,{key:C(o),isPresent:!0,presenceAffectsLayout:a,mode:f},o)}),e.createElement(e.Fragment,null,d.size?c:c.map(o=>e.cloneElement(o)))},N=({onClick:n,className:s})=>y.jsx("button",{title:"close",type:"button",className:`flex items-center justify-center aspect-square w-10 rounded-full z-[10] bg-white ${s||"absolute left-3 top-2 lg:top-5 "}`,onClick:n,children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:y.jsx("path",{d:"M0.331288 12.0052C-0.101821 12.4381 -0.122445 13.2113 0.3416 13.6546C0.785021 14.1186 1.56874 14.0979 2.00185 13.6649L7.00323 8.66495L12.0046 13.6649C12.448 14.1082 13.2111 14.1186 13.6545 13.6546C14.1186 13.2113 14.1083 12.4381 13.6649 11.9948L8.66348 6.99485L13.6649 2.00515C14.1083 1.55155 14.1186 0.78866 13.6545 0.345361C13.2111 -0.118557 12.448 -0.108247 12.0046 0.335052L7.00323 5.33505L2.00185 0.335052C1.56874 -0.0979382 0.785021 -0.118557 0.3416 0.345361C-0.122445 0.78866 -0.101821 1.56186 0.331288 1.99485L5.33267 6.99485L0.331288 12.0052Z",fill:"#869AB8",fillOpacity:"0.7"})})});export{H as A,N as X};
