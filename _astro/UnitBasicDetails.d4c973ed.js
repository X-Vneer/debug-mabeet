import{r as b}from"./index.0b2a3d34.js";import{g as v,a as m,b as G}from"./index.e77bb1b1.js";import{u as B}from"./useBusyDays.68dd123a.js";import{u as S}from"./index.64890424.js";import{s as F}from"./shallow.9563ddbe.js";import{u as I}from"./useFetcher.eba3529e.js";import{g as k,B as C,a as A}from"./index.8844c111.js";import{j as e}from"./jsx-runtime.32b752e4.js";import{D as E}from"./DatePickerInput.961328e7.js";import{n as P}from"./events.f9ec1bb8.js";import{S as n}from"./Skeleton.a6d268c9.js";import{S as R,G as U}from"./index.c69ec769.js";const X=({checkin:a,checkout:r,allowChangeDate:f=!0})=>{let[x,o,j]=v(["id","from","to"]);const[s,d]=S(t=>[t.dates,t.setDates],F),p=t=>{const i=G(t[0],t[1]);if(h.find((g,$)=>i.includes(g))){P.show({color:"red",title:"عذرا لايمكنك الحجز",message:"يوجد ايام محجوزة مسبقا في الايام المختارة, يمكن تجربة اختيار ايام اخرى"});return}d(()=>({dates:t}))};b.useEffect(()=>{d(()=>({dates:[new Date(o),new Date(j)]}))},[]);const{busyDays:h,handleStartDateChange:N,error:_,isLoading:y}=B({id:x,initialDate:o}),u=`/units/${x}/availability?from=${m(s[0])}&to=${m(s[1])}`,{data:D,isLoading:w,error:T}=I({reqKey:s[1]?u:null,url:u,options:{headers:{"Accept-Language":"ar-SA,ar;q=0.9"}}});return e.jsx("div",{className:"pt-5 pb-10 shadow-sm ",children:e.jsxs("div",{className:"rounded-lg bg-customWhite p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["تفاصيل الحجز"," ",e.jsxs("span",{className:"text-sm font-normal",children:["(",D?.duration_count,")"]})]}),f?e.jsxs("div",{className:"relative",children:[e.jsxs("span",{className:"text-sm flex gap-1 items-center ",children:[e.jsx(k,{}),"غير التاريخ"]}),e.jsx("div",{className:" absolute inset-0 ",dir:"ltr",children:e.jsx(E,{weekendDays:[4,5],type:"range",classNames:{day:`data-[selected=true]:!rounded-full hover:!rounded-full !relative ${w?"pointer-events-none opacity-50":""}`,calendarHeaderControl:"custom-rotate",wrapper:"w-full  ",input:"!border-[transparent]  !h-10 !text-transparent",label:"!pb-[3px]"},onDateChange:N,hideOutsideDates:!0,value:s,onChange:t=>{if(!y){if(!t[0]&&!t[1]){p([new Date,new Date(new Date().setDate(new Date().getDate()+1))]);return}p(t)}},renderDay:t=>{const i=t.getDate(),c=h.includes(m(t));return e.jsxs("div",{className:c?"opacity-50":"",children:[i," ",c&&e.jsx("span",{className:"absolute top-1 bottom-1 right-[18px] rotate-45 w-[1px] bg-textGray origin-center"})," "]})},closeOnChange:!1,mx:"auto",maw:400,minDate:new Date,radius:"md"})})]}):null]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"text-textGray font-medium text-[14px] mb-2 ",children:"تاريخ الوصول"}),s[0]?e.jsxs("div",{className:"  whitespace-nowrap",children:[e.jsx("span",{className:" text-[15px] text-[#1f1f1f]  font-medium",children:new Intl.DateTimeFormat("ar-SA",{weekday:"long"}).format(s[0])})," ",",",e.jsx("span",{className:"text-[#1f1f1f]  font-semibold",children:s[0].getDate()})," ",e.jsxs("p",{className:"text-[12px] inline ",children:[new Intl.DateTimeFormat("ar-US",{month:"long"}).format(s[0])," ",s[0].getFullYear()]})]}):null]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"text-textGray font-medium text-[14px] mb-2 ",children:"تاريخ المغادرة"}),s[1]?e.jsxs("div",{className:"  whitespace-nowrap",children:[e.jsx("span",{className:" text-[15px] text-[#1f1f1f]  font-medium",children:new Intl.DateTimeFormat("ar-SA",{weekday:"long"}).format(s[1])})," ",",",e.jsx("span",{className:"text-[#1f1f1f]  font-semibold",children:s[1].getDate()})," ",e.jsxs("p",{className:"text-[12px] inline ",children:[new Intl.DateTimeFormat("ar-US",{month:"long"}).format(s[1])," ",s[1].getFullYear()]})]}):null]})]}),e.jsxs("div",{className:"flex gap-2  pt-3",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("p",{className:"text-textGray font-medium  text-sm mb-1",children:"وقت الوصول"}),e.jsx("span",{children:a})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("p",{className:"text-textGray font-medium  text-sm mb-1",children:"وقت المغادرة"}),e.jsx("span",{children:r})]})]})]})})},l=({children:a})=>e.jsx("div",{className:"flex  gap-2 items-center  w-1/2 text-textGray",children:a}),Z=({isLoading:a,data:r})=>e.jsxs("div",{className:"py-6 border-b border-[#ccc]",children:[e.jsx("div",{className:"pb-3",children:e.jsxs("h1",{className:"text-customBlack font-bold text-xl",children:[a?e.jsx(n,{className:"w-[180px] h-4 rounded-[30px]"}):r?.unit_name," ",e.jsxs("span",{className:"text-[10px] text-normal text-textGray",children:["( كود الوحدة (",a?e.jsx(n,{className:"w-20 h-2 rounded-3xl"}):r?.unit_code,") )"]})]})}),e.jsxs("div",{className:" text-sm font-medium",children:[e.jsxs("div",{className:"flex items-center mb-3  ",children:[e.jsxs(l,{children:[e.jsx(C,{className:"text-textGray"}),e.jsx("p",{children:a?e.jsx(n,{className:"w-20 h-2 rounded-3xl"}):r?.rating?r.rating:"لا يوجد"})]}),e.jsxs(l,{children:[e.jsx(R,{className:"text-textGray"}),a?e.jsx(n,{className:"w-[80px] h-2 rounded-[20px]"}):e.jsxs("p",{children:[r?.province," - ",r?.city]})]})]}),e.jsxs("div",{className:"flex items-center ",children:[e.jsxs(l,{children:[e.jsx(U,{className:"text-textGray"}),e.jsxs("p",{children:["مساحة الوحدة",a?e.jsx(n,{className:"w-[50px] h-2 rounded-[20px]"}):e.jsxs("span",{children:["(",r?.unit_area,")"]})]})]}),e.jsxs(l,{children:[e.jsx(A,{className:"text-textGray"}),e.jsxs("p",{children:["مخصص ل",a?e.jsx(n,{className:"w-[50px] h-2 rounded-[20px]"}):e.jsxs("span",{children:["(",r.unit_for,")"]})]})]})]})]})]});export{X as M,Z as U};
