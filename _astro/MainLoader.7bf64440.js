import{a as xt,r as T}from"./index.e76fa941.js";import{s as Jt}from"./index.aca10899.js";import{s as Kt}from"./index.35b7dd5e.js";import{r as Yt}from"./index.23d61559.js";import{j as It}from"./jsx-runtime.fd9a4f39.js";const L=new WeakMap,lt={},nt={},U=()=>{},V=U(),ft=Object,a=t=>t===V,x=t=>typeof t=="function",P=(t,e)=>({...t,...e}),wt="undefined",ot=typeof window!=wt,ht=typeof document!=wt,Qt=()=>ot&&typeof window.requestAnimationFrame!=wt,Ft=(t,e)=>{const n=L.get(t);return[()=>!a(e)&&t.get(e)||lt,r=>{if(!a(e)){const o=t.get(e);e in nt||(nt[e]=o),n[5](e,P(o,r),o||lt)}},n[6],()=>!a(e)&&e in nt?nt[e]:!a(e)&&t.get(e)||lt]},st=new WeakMap;let Xt=0;const X=t=>{const e=typeof t,n=t&&t.constructor,r=n==Date;let o,i;if(ft(t)===t&&!r&&n!=RegExp){if(o=st.get(t),o)return o;if(o=++Xt+"~",st.set(t,o),n==Array){for(o="@",i=0;i<t.length;i++)o+=X(t[i])+",";st.set(t,o)}if(n==ft){o="#";const c=ft.keys(t).sort();for(;!a(i=c.pop());)a(t[i])||(o+=i+":"+X(t[i])+",");st.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o};let mt=!0;const Zt=()=>mt,[pt,_t]=ot&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[U,U],te=()=>{const t=ht&&document.visibilityState;return a(t)||t!=="hidden"},ee=t=>(ht&&document.addEventListener("visibilitychange",t),pt("focus",t),()=>{ht&&document.removeEventListener("visibilitychange",t),_t("focus",t)}),ne=t=>{const e=()=>{mt=!0,t()},n=()=>{mt=!1};return pt("online",e),pt("offline",n),()=>{_t("online",e),_t("offline",n)}},se={isOnline:Zt,isVisible:te},oe={initFocus:ee,initReconnect:ne},Nt=!xt.useId,Z=!ot||"Deno"in window,re=t=>Qt()?window.requestAnimationFrame(t):setTimeout(t,1),dt=Z?T.useEffect:T.useLayoutEffect,Et=typeof navigator<"u"&&navigator.connection,yt=!Z&&Et&&(["slow-2g","2g"].includes(Et.effectiveType)||Et.saveData),vt=t=>{if(x(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?X(t):"",[t,e]};let ie=0;const Tt=()=>++ie,Mt=0,Wt=1,Ut=2,ae=3;var Q={__proto__:null,FOCUS_EVENT:Mt,RECONNECT_EVENT:Wt,MUTATE_EVENT:Ut,ERROR_REVALIDATE_EVENT:ae};async function Pt(...t){const[e,n,r,o]=t,i=P({populateCache:!0,throwOnError:!0},typeof o=="boolean"?{revalidate:o}:o||{});let c=i.populateCache;const d=i.rollbackOnError;let f=i.optimisticData;const D=i.revalidate!==!1,p=S=>typeof d=="function"?d(S):d!==!1,_=i.throwOnError;if(x(n)){const S=n,v=[],g=e.keys();for(let s=g.next();!s.done;s=g.next()){const F=s.value;!/^\$(inf|sub)\$/.test(F)&&S(e.get(F)._k)&&v.push(F)}return Promise.all(v.map(b))}return b(n);async function b(S){const[v]=vt(S);if(!v)return;const[g,s]=Ft(e,v),[F,q,G]=L.get(e),M=F[v],H=()=>D&&(delete G[v],M&&M[0])?M[0](Ut).then(()=>g().data):g().data;if(t.length<3)return H();let h=r,u;const k=Tt();q[v]=[k,0];const I=!a(f),j=g(),rt=j.data,tt=j._c,A=a(tt)?rt:tt;if(I&&(f=x(f)?f(A):f,s({data:f,_c:A})),x(h))try{h=h(A)}catch(B){u=B}if(h&&x(h.then))if(h=await h.catch(B=>{u=B}),k!==q[v][0]){if(u)throw u;return h}else u&&I&&p(u)&&(c=!0,h=A,s({data:h,_c:V}));c&&(u||(x(c)&&(h=c(h,A)),s({data:h,_c:V}))),q[v][1]=Tt();const it=await H();if(s({_c:V}),u){if(_)throw u;return}return c?it:h}}const Lt=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},ce=(t,e)=>{if(!L.has(t)){const n=P(oe,e),r={},o=Pt.bind(V,t);let i=U;const c={},d=(p,_)=>{const b=c[p]||[];return c[p]=b,b.push(_),()=>b.splice(b.indexOf(_),1)},f=(p,_,b)=>{t.set(p,_);const S=c[p];if(S)for(const v of S)v(_,b)},D=()=>{if(!L.has(t)&&(L.set(t,[r,{},{},{},o,f,d]),!Z)){const p=n.initFocus(setTimeout.bind(V,Lt.bind(V,r,Mt))),_=n.initReconnect(setTimeout.bind(V,Lt.bind(V,r,Wt)));i=()=>{p&&p(),_&&_(),L.delete(t)}}};return D(),[t,o,D,i]}return[t,L.get(t)[4]]},ue=(t,e,n,r,o)=>{const i=n.errorRetryCount,c=o.retryCount,d=~~((Math.random()+.5)*(1<<(c<8?c:8)))*n.errorRetryInterval;!a(i)&&c>i||setTimeout(r,d,o)},le=(t,e)=>X(t)==X(e),[qt,fe]=ce(new Map),de=P({onLoadingSlow:U,onSuccess:U,onError:U,onErrorRetry:ue,onDiscarded:U,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:yt?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:yt?5e3:3e3,compare:le,isPaused:()=>!1,cache:qt,mutate:fe,fallback:{}},se),Ee=(t,e)=>{const n=P(t,e);if(e){const{use:r,fallback:o}=t,{use:i,fallback:c}=e;r&&i&&(n.use=r.concat(i)),o&&c&&(n.fallback=P(o,c))}return n},Re=T.createContext({}),Gt=ot&&window.__SWR_DEVTOOLS_USE__,he=Gt?window.__SWR_DEVTOOLS_USE__:[],me=()=>{Gt&&(window.__SWR_DEVTOOLS_REACT__=xt)},pe=t=>x(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],_e=()=>P(de,T.useContext(Re)),Te=t=>(e,n,r)=>t(e,n&&((...i)=>{const c=vt(e)[0],[,,,d]=L.get(qt),f=d[c];return f?(delete d[c],f):n(...i)}),r),we=he.concat(Te),ve=t=>function(...n){const r=_e(),[o,i,c]=pe(n),d=Ee(r,c);let f=t;const{use:D}=d,p=(D||[]).concat(we);for(let _=p.length;_--;)f=p[_](f);return f(o,i||d.fetcher||null,d)},ge=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o>=0&&(r[o]=r[r.length-1],r.pop())}};me();const Rt={dedupe:!0},Se=(t,e,n)=>{const{cache:r,compare:o,suspense:i,fallbackData:c,revalidateOnMount:d,revalidateIfStale:f,refreshInterval:D,refreshWhenHidden:p,refreshWhenOffline:_,keepPreviousData:b}=n,[S,v,g]=L.get(r),[s,F]=vt(t),q=T.useRef(!1),G=T.useRef(!1),M=T.useRef(s),H=T.useRef(e),h=T.useRef(n),u=()=>h.current,k=()=>u().isVisible()&&u().isOnline(),[I,j,rt,tt]=Ft(r,s),A=T.useRef({}).current,it=a(c)?n.fallback[s]:c,B=(l,E)=>{let R=!0;for(const w in A){const m=w;m==="data"?o(E[m],l[m])||a(l[m])&&o(E[m],at)||(R=!1):E[m]!==l[m]&&(R=!1)}return R},gt=T.useMemo(()=>{const l=(()=>!s||!e?!1:a(d)?u().isPaused()||i?!1:a(f)?!0:f:d)(),E=N=>{const W=P(N);return delete W._k,l?{isValidating:!0,isLoading:!0,...W}:W},R=I(),w=tt(),m=E(R),K=R===w?m:E(w);let C=m;return[()=>{const N=E(I());return B(N,C)?C:C=N},()=>K]},[r,s]),$=Jt.useSyncExternalStore(T.useCallback(l=>rt(s,(E,R)=>{B(R,E)||l()}),[r,s]),gt[0],gt[1]),St=!q.current,kt=S[s]&&S[s].length>0,z=$.data,J=a(z)?it:z,et=$.error,Ct=T.useRef(J),at=b?a(z)?Ct.current:z:J,Ot=(()=>kt&&!a(et)?!1:St&&!a(d)?d:u().isPaused()?!1:i?a(J)?!1:f:a(J)||f)(),Dt=!!(s&&e&&St&&Ot),jt=a($.isValidating)?Dt:$.isValidating,Bt=a($.isLoading)?Dt:$.isLoading,Y=T.useCallback(async l=>{const E=H.current;if(!s||!E||G.current||u().isPaused())return!1;let R,w,m=!0;const K=l||{},C=!g[s]||!K.dedupe,N=()=>Nt?!G.current&&s===M.current&&q.current:s===M.current,W={isValidating:!1,isLoading:!1},bt=()=>{j(W)},At=()=>{const O=g[s];O&&O[1]===w&&delete g[s]},Vt={isValidating:!0};a(I().data)&&(Vt.isLoading=!0);try{if(C&&(j(Vt),n.loadingTimeout&&a(I().data)&&setTimeout(()=>{m&&N()&&u().onLoadingSlow(s,n)},n.loadingTimeout),g[s]=[E(F),Tt()]),[R,w]=g[s],R=await R,C&&setTimeout(At,n.dedupingInterval),!g[s]||g[s][1]!==w)return C&&N()&&u().onDiscarded(s),!1;W.error=V;const O=v[s];if(!a(O)&&(w<=O[0]||w<=O[1]||O[1]===0))return bt(),C&&N()&&u().onDiscarded(s),!1;const y=I().data;W.data=o(y,R)?y:R,C&&N()&&u().onSuccess(R,s,n)}catch(O){At();const y=u(),{shouldRetryOnError:ct}=y;y.isPaused()||(W.error=O,C&&N()&&(y.onError(O,s,y),(ct===!0||x(ct)&&ct(O))&&k()&&y.onErrorRetry(O,s,y,zt=>{const ut=S[s];ut&&ut[0]&&ut[0](Q.ERROR_REVALIDATE_EVENT,zt)},{retryCount:(K.retryCount||0)+1,dedupe:!0})))}return m=!1,bt(),!0},[s,r]),$t=T.useCallback((...l)=>Pt(r,M.current,...l),[]);if(dt(()=>{H.current=e,h.current=n,a(z)||(Ct.current=z)}),dt(()=>{if(!s)return;const l=Y.bind(V,Rt);let E=0;const w=ge(s,S,(m,K={})=>{if(m==Q.FOCUS_EVENT){const C=Date.now();u().revalidateOnFocus&&C>E&&k()&&(E=C+u().focusThrottleInterval,l())}else if(m==Q.RECONNECT_EVENT)u().revalidateOnReconnect&&k()&&l();else{if(m==Q.MUTATE_EVENT)return Y();if(m==Q.ERROR_REVALIDATE_EVENT)return Y(K)}});return G.current=!1,M.current=s,q.current=!0,j({_k:F}),Ot&&(a(J)||Z?l():re(l)),()=>{G.current=!0,w()}},[s]),dt(()=>{let l;function E(){const w=x(D)?D(I().data):D;w&&l!==-1&&(l=setTimeout(R,w))}function R(){!I().error&&(p||u().isVisible())&&(_||u().isOnline())?Y(Rt).then(E):E()}return E(),()=>{l&&(clearTimeout(l),l=-1)}},[D,p,_,s]),T.useDebugValue(at),i&&a(J)&&s)throw!Nt&&Z?new Error("Fallback data is required when using suspense in SSR."):(H.current=e,h.current=n,G.current=!1,a(et)?Y(Rt):et);return{mutate:$t,get data(){return A.data=!0,at},get error(){return A.error=!0,et},get isValidating(){return A.isValidating=!0,jt},get isLoading(){return A.isLoading=!0,Bt}}};var Ce=ve(Se);const Ie=({reqKey:t,url:e,options:n})=>(t??=e,Ce(t,async o=>await Kt(o,n),{revalidateOnFocus:!1}));var Ht=Yt.GenIcon,Ne=function(e){return Ht({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"polyline",attr:{fill:"none",stroke:"#000",strokeWidth:"2",points:"7 2 17 12 7 22"}}]})(e)},ye=function(e){return Ht({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"polyline",attr:{fill:"none",stroke:"#000",strokeWidth:"2",points:"7 2 17 12 7 22",transform:"matrix(-1 0 0 1 24 0)"}}]})(e)};const Le=({className:t})=>It.jsx("div",{className:` p-6 ${t}`,children:It.jsx("span",{className:"loader"})});export{ye as G,Le as M,Ne as a,Ie as u};
