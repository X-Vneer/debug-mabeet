import{r as j}from"./index.0b2a3d34.js";import{g as D,a as s}from"./index.2c513237.js";import{u as g}from"./useBusyDays.bc87833d.js";import{u as w,s as N}from"./shallow.c4dd725a.js";import{u as b}from"./useFetcher.cd45a1ad.js";import{g as y}from"./index.a34f4eb9.js";import{j as e}from"./jsx-runtime.32b752e4.js";import{D as v}from"./DatePickerInput.2632e018.js";const $=({checkin:c,checkout:d,allowChangeDate:x=!0})=>{let[r,n,p]=D(["id","from","to"]);const[t,l]=w(a=>[a.dates,a.setDates],N),i=a=>{l(()=>({dates:a}))};j.useEffect(()=>{l(()=>({dates:[new Date(n),new Date(p)]}))},[]);const{busyDays:u,handleStartDateChange:F,error:S}=g({id:r,initialDate:n}),m=`/units/${r}/availability?from=${s(t[0])}&to=${s(t[1])}`,{data:f,isLoading:A,error:C}=b({reqKey:t[1]?m:null,url:m,options:{headers:{"Accept-Language":"ar-SA,ar;q=0.9"}}});return e.jsx("div",{className:"pt-5 pb-10 shadow-sm ",children:e.jsxs("div",{className:"rounded-lg bg-customWhite p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["تفاصيل الحجز"," ",e.jsxs("span",{className:"text-sm font-normal",children:["(",f?.duration_count,")"]})]}),x?e.jsxs("div",{className:"relative",children:[e.jsxs("span",{className:"text-sm flex gap-1 items-center ",children:[e.jsx(y,{}),"غير التاريخ"]}),e.jsx("div",{className:" absolute inset-0 ",dir:"ltr",children:e.jsx(v,{weekendDays:[4,5],type:"range",classNames:{day:"data-[selected=true]:!rounded-full hover:!rounded-full !relative",calendarHeaderControl:"custom-rotate",wrapper:"w-full  ",input:"!border-[transparent]  !h-10 !text-transparent",label:"!pb-[3px]"},hideOutsideDates:!0,value:t,onChange:a=>{if(!a[0]&&!a[1]){i([new Date,new Date(new Date().setDate(new Date().getDate()+1))]);return}i(a)},renderDay:a=>{const h=a.getDate(),o=u.includes(s(a));return e.jsxs("div",{className:o?"opacity-50":"",children:[h," ",o&&e.jsx("span",{className:"absolute top-1 bottom-1 right-[18px] rotate-45 w-[1px] bg-textGray origin-center"})," "]})},closeOnChange:!1,mx:"auto",maw:400,minDate:new Date,radius:"md"})})]}):null]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"text-textGray font-medium text-[14px] mb-2 ",children:"تاريخ الوصول"}),t[0]?e.jsxs("div",{className:"  whitespace-nowrap",children:[e.jsx("span",{className:" text-[15px] text-[#1f1f1f]  font-medium",children:new Intl.DateTimeFormat("ar-SA",{weekday:"long"}).format(t[0])})," ",",",e.jsx("span",{className:"text-[#1f1f1f]  font-semibold",children:t[0].getDate()})," ",e.jsxs("p",{className:"text-[12px] inline ",children:[new Intl.DateTimeFormat("ar-US",{month:"long"}).format(t[0])," ",t[0].getFullYear()]})]}):null]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"text-textGray font-medium text-[14px] mb-2 ",children:"تاريخ المغادرة"}),t[1]?e.jsxs("div",{className:"  whitespace-nowrap",children:[e.jsx("span",{className:" text-[15px] text-[#1f1f1f]  font-medium",children:new Intl.DateTimeFormat("ar-SA",{weekday:"long"}).format(t[1])})," ",",",e.jsx("span",{className:"text-[#1f1f1f]  font-semibold",children:t[1].getDate()})," ",e.jsxs("p",{className:"text-[12px] inline ",children:[new Intl.DateTimeFormat("ar-US",{month:"long"}).format(t[1])," ",t[1].getFullYear()]})]}):null]})]}),e.jsxs("div",{className:"flex gap-2  pt-3",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("p",{className:"text-textGray font-medium  text-sm mb-1",children:"وقت الوصول"}),e.jsx("span",{children:c})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("p",{className:"text-textGray font-medium  text-sm mb-1",children:"وقت المغادرة"}),e.jsx("span",{children:d})]})]})]})})};export{$ as M};
